<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Add Gym Member</title>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#ff2e63;
  --secondary:#08d9d6;
  --bg:#05070d;
  --card:#0f1424;
  --input:#0b1020;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

html,body{
  min-height:100vh;
  font-family:'Montserrat',sans-serif;
  background:var(--bg);
  color:#fff;
}

body{
  display:flex;
  flex-direction:column;
}

/* ================= BACKGROUND ================= */
.page-wrapper{
  flex:1;
  background:
    linear-gradient(rgba(0,0,0,.65),rgba(0,0,0,.9)),
    url("https://images.unsplash.com/photo-1534438327276-14e5300c3a48") center/cover;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px 20px;
}

/* ================= CARD ================= */
.form-container{
  position:relative;
  width:100%;
  max-width:820px;
  background:var(--card);
  border-radius:26px;
  padding:40px;
  box-shadow:0 40px 100px rgba(0,0,0,.9);
}


/* ================= TITLE ================= */
.form-title{
  text-align:center;
  margin-bottom:35px;
}

.form-title h2{
  font-size:32px;
  font-weight:800;
  color:var(--primary);
}

.form-title p{
  margin-top:6px;
  font-size:14px;
  color:#bbb;
}

/* ================= FORM GRID ================= */
form{
  display:grid;
  grid-template-columns:1fr 1fr;
  column-gap:24px;
  row-gap:22px;
}

/* ================= FORM GROUP ================= */
.form-group{
  display:flex;
  flex-direction:column;
}

.form-group.full{
  grid-column:1 / -1;
}

label{
  font-size:13px;
  font-weight:600;
  margin-bottom:8px;
  color:#ccc;
}

/* ================= INPUTS ================= */
input,
select{
  height:48px;
  padding:0 16px;
  border-radius:12px;
  border:1px solid #1f2642;
  background:var(--input);
  color:#fff;
  font-size:14px;
}

input::placeholder{
  color:#888;
}

input:focus,
select:focus{
  outline:none;
  border-color:var(--secondary);
  box-shadow:0 0 0 2px rgba(8,217,214,.25);
}

/* ================= BUTTON ================= */
button{
  grid-column:1 / -1;
  height:52px;
  margin-top:10px;
  border:none;
  border-radius:30px;
  background:linear-gradient(135deg,var(--primary),var(--secondary));
  color:#000;
  font-weight:800;
  font-size:15px;
  cursor:pointer;
  transition:.3s;
}

button:hover{
  transform:scale(1.03);
  box-shadow:0 0 30px rgba(255,46,99,.6);
}

/* ================= MESSAGE ================= */
#msg{
  margin-top:18px;
  text-align:center;
  font-weight:700;
}

/* ================= FOOTER ================= */
footer{
  background:#02030a;
  text-align:center;
  padding:16px;
  font-size:13px;
  color:#aaa;
}

/* ================= MOBILE ================= */
@media(max-width:768px){
  .form-container{
    padding:30px 22px;
  }

  form{
    grid-template-columns:1fr;
  }

  button{
    height:50px;
  }
  /* ================= CLOSE BUTTON ================= */
.close-btn{
  position:absolute;
  top:18px;
  right:18px;
  width:38px;
  height:38px;
  border-radius:50%;
  background:rgba(255,255,255,0.08);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:.3s;
}

.close-btn i{
  color:#fff;
  font-size:18px;
}

.close-btn:hover{
  background:rgba(255,46,99,0.9);
  transform:scale(1.05);
}

}
</style>
</head>

<body>

<div class="page-wrapper">
  <div class="form-container">
<a href="./gym-dashboard.html" class="close-btn" title="Back to Dashboard">
  <i class="fas fa-times"></i>
</a>

    <div class="form-title">
      <h2><i class="fas fa-user-plus"></i> Add Gym Member</h2>
      <p>Fill member information carefully</p>
    </div>

    <form id="memberForm">

      <div class="form-group">
        <label>Member Name</label>
        <input type="text" id="name" placeholder="Full Name" required>
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" id="email" placeholder="example@email.com" required>
      </div>

      <div class="form-group">
        <label>Mobile Number</label>
        <input type="tel" id="mobile" placeholder="10 digit number" required>
      </div>

      <div class="form-group">
        <label>Joining Date</label>
        <input type="date" id="joiningDate" required>
      </div>

      <div class="form-group">
        <label>Duration (Months)</label>
        <select id="duration" required>
          <option value="">Select Duration</option>
          <option value="1">1 Month</option>
          <option value="3">3 Months</option>
          <option value="6">6 Months</option>
          <option value="12">12 Months</option>
        </select>
      </div>

      <div class="form-group">
        <label>Payment Amount (₹)</label>
        <input type="number" id="paymentAmount" placeholder="Amount" required>
      </div>

      <div class="form-group full">
        <label>Payment Status</label>
        <select id="paymentStatus" required>
          <option value="">Select Status</option>
          <option value="Paid">Paid</option>
          <option value="Unpaid">Unpaid</option>
        </select>
      </div>

      <button type="submit">
        <i class="fas fa-plus-circle"></i> Add Member
      </button>

    </form>

    <p id="msg"></p>

  </div>
</div>

<footer>
  © 2025 <b>BlissTech7 Solutions</b> | blisstech7solutions@gmail.com
</footer>

<!-- ================= FUNCTIONALITY (UNCHANGED) ================= -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCY5-w3jLyC9iXN8Kh26wGIVia1zGuGwyk",
  authDomain: "gym-management-50b12.firebaseapp.com",
  projectId: "gym-management-50b12",
  storageBucket: "gym-management-50b12.appspot.com",
  messagingSenderId: "202067078338",
  appId: "1:202067078338:web:6ad435b248f3230d7cdf5b"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const form = document.getElementById("memberForm");
const msg = document.getElementById("msg");

onAuthStateChanged(auth, user => {
  if(!user){
    window.location.href = "/index.html";
  }

  form.addEventListener("submit", async e => {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const mobile = document.getElementById("mobile").value.trim();
    const joiningDate = document.getElementById("joiningDate").value;
    const duration = document.getElementById("duration").value;
    const paymentAmount = document.getElementById("paymentAmount").value.trim();
    const paymentStatus = document.getElementById("paymentStatus").value;

    if(!name || !email || !mobile || !joiningDate || !duration || !paymentAmount || !paymentStatus){
      msg.textContent = "Please fill all fields.";
      msg.style.color = "red";
      return;
    }

    const joinDate = new Date(joiningDate);
    const renewalDate = new Date(joinDate);
    renewalDate.setMonth(renewalDate.getMonth() + parseInt(duration));
    const daysTotal = Math.floor((renewalDate - joinDate) / (1000 * 3600 * 24));

    try{
      await addDoc(collection(db,"gyms",user.uid,"members"),{
        name,
        email,
        mobile,
        joiningDate,
        duration,
        paymentAmount,
        paymentStatus,
        renewalDate: renewalDate.toISOString().split("T")[0],
        daysTotal,
        createdAt: serverTimestamp()
      });

      msg.textContent = "Member added successfully!";
      msg.style.color = "lime";
      form.reset();
      window.location.href = "./gym-dashboard.html";
    }catch(err){
      msg.textContent = "Error adding member. Try again.";
      msg.style.color = "red";
    }
  });
});
</script>

</body>
</html>
